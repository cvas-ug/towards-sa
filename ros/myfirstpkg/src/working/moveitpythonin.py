#!usr/bin/env python

import sys
import copy
import rospy
import moveit_commander
import moveit_msgs.msg
import geometry_msgs.msg
from std_msgs.msg import String
import random

moveit_commander.roscpp_initialize(sys.argv)
rospy.init_node('random_intherange', anonymous=True)
robot = moveit_commander.RobotCommander()
scene = moveit_commander.PlanningSceneInterface()

group_both = moveit_commander.MoveGroupCommander("both_arms")
group_right = moveit_commander.MoveGroupCommander("right_arm")
group_left = moveit_commander.MoveGroupCommander("left_arm")

#display_trajectory_publisher = rospy.Publisher('/move_group/display_planned_path',
#                                               moveit_msgs.msg.DisplayTrajectory,
#                                               queue_size=20)
pose_target_left = geometry_msgs.msg.Pose()
pose_target_right = geometry_msgs.msg.Pose()

# orientation.x, orientation.y, orientation.z, orientation.w, position.x, position.y, position.z
right_arm_simulator =[
[0.173, 0.908, 0.368, -0.102, 0.595, -0.232, 0.988], 	#0 grippers
[0.197, 0.727, 0.657, -0.036, 0.654, 0.197, 0.903],  	#1 My hands
[0.197, 0.727, 0.657, -0.037, 0.768, 0.045, 0.806],  	#2 hands far down
[0.473, 0.664, 0.497, 0.296, 0.805, -0.056, 0.786],    	#3 
[0.243, 0.727, 0.642, 0.014, 0.804, -0.055, 0.786],     #4
[-0.050, 0.881, 0.190, 0.431, 0.983, 0.003, 0.649],     #5 
[-0.050, 0.881, 0.191, 0.431, 0.997, -0.233, 0.692], 	#6
[0.125, 0.884, -0.173, 0.416, 0.998, -0.234, 0.692],	#7
[0.124, 0.884, -0.173, 0.416, 0.927, -0.143, 0.894],    #8
[-0.044, 0.938, 0.178, 0.294, 0.709, -0.064, 0.989],    #9 
[0.066, 0.987, 0.122, -0.082, 0.764, -0.099, 0.939],	#10 pick
[0.066, 0.987, 0.122, -0.081, 0.419, -0.051, 1.062],	#11
[0.179, 0.158, 0.970, 0.054, 0.555, -0.098, 1.030], 	#12 my gripper
[0.182, 0.697, 0.675, 0.162, 0.806, 0.057, 1.127],	#13
[0.182, 0.697, 0.674, 0.162, 0.855, 0.370, 0.915],	#14
[0.182, 0.697, 0.675, 0.162, 0.888, 0.265, 0.906],	#15 out/in
[0.659, 0.736, 0.123, 0.094, 0.452, -0.723, 0.530], 	#16 out/in
[-0.174, 0.657, 0.229, 0.697, 1.011, 0.244, 0.952]	#17 out/in
]

left_arm_simulator =[
[0.649, -0.495, 0.467, 0.341, 0.593, 0.110, 0.800],  #0
[0.689, -0.436, 0.436, 0.381, 0.670, 0.025, 1.098],  #1 My hands
[0.689, -0.437, 0.435, 0.381, 0.784, 0.137, 0.755],  #2 hands far down
[0.814, -0.576, -0.047, 0.057, 0.789, 0.171, 0.754], #3 
[0.282, -0.626, 0.696, -0.208, 0.790, 0.170, 0.755], #4
[0.449, 0.762, 0.048, 0.464, 0.989, 0.119, 0.627],   #5 
[0.448, 0.763, 0.047, 0.464, 0.924, 0.466, 0.699],   #6
[0.240, 0.688, 0.331, 0.599, 0.925, 0.466, 0.700],   #7
[0.240, 0.688, 0.332, 0.599, 0.830, 0.278, 1.096],   #8
[0.570, 0.693, -0.209, 0.390, 0.767, 0.198, 1.034],  #9
[0.755, 0.643, 0.029, 0.120, 0.816, 0.096, 0.924],   #10 pick
[0.765, 0.641, -0.057, 0.020, 0.512, 0.163, 0.990],  #11
[0.170, 0.235, -0.728, 0.621, 0.504, 0.077, 1.083],  #12 my gripper
[0.536, 0.534, -0.521, 0.397, 0.424, 0.098, 1.108],  #13
[0.537, 0.533, -0.520, 0.397, 0.298, 0.004, 1.306],  #14
[-0.147, 0.456, -0.605, 0.636, 1.120, 0.196, 1.710], #15 out/in
[0.421, -0.385, 0.819, 0.064, 0.743, -0.240, 1.186], #16 out/in
[0.854, -0.332, 0.346, -0.202, 0.527, 0.802, 0.490]  #17 out/in
]

right_arm =[
	[0.270598649982, 0.653281233946, 0.857820577858, 0.450363429118, 0.867507879361, -0.26687019222, 0.667205858936], #0 ta3al ta3al
	[0.141912535387, 0.0464314991884, 0.855490114567, 0.495498927132, 0.747070594242, -0.229433891739, 0.951445396917], #1 do3a'a
	[0.270598649982, 0.675667538925, -0.181216311606, 0.680748068492, 1.22919893438, -0.19620789659, 0.285241102435], #2 yamshy nayem
	[-0.0416081238821, 0.508293244318, 0.828433269643, 0.231367838058, 0.753186679896, -0.160670403434, 0.581930067344], #3 shoka ow sacheen
	[0.00702520795041, -0.0311165274133, 0.996762064122, 0.0738601819425, 0.879217883204, -0.292927516693, 0.791496035319], #4 boksaat
	[0.977093865527, 0.127907955869, 0.168289004066, 0.0239192484528, 0.93966267943, -0.535448617094, -0.00118793081387], #5 eddy maksorah
	[0.302185214414, 0.156022774102, 0.922760436895, 0.181671659627, 0.942350326135, -0.267294213854, 0.234190579417], #6 3a6ny asheel
	[-0.234240382027, 0.147877101953, 0.955714907985, 0.098864339239, 0.378528277005, -0.0750771000025, 0.757842705211], #7 hatha anna?
	[0.270598649982, 0.653281233946, 0.754550106372, 0.253577131187, 1.08873322807, -0.311190382694, 0.307965632427], #8 a'3ezeek?
	[0.44952814571, -0.0179631379326, 0.862334058226, 0.231283325894, 1.0949504929, -0.584297083984, 0.871020387],  # 9
	[0.645194703118, 0.668577635964, 0.289141826191, 0.231151650504, 1.01705949277, -0.27533086646, 0.527151562134], #10 3ankaboot
	[0.35315415228, 0.841128009996, 0.215429808403, 0.348203860648, 0.804242103124, -0.22831592894, 0.745748059751], #11 finish him
	[0.877765814488, 0.399083486417, 0.0971907632193, 0.246103406773, 0.722230548599, -0.294725923962, 0.655934059161], #12 wakaa
	[0.270598649982, 0.653281233946, -0.657884643808, 0.729477966033, 0.580086121201, -0.286306794853, 0.800677247431], #13 do3a'a open
	[-0.209159207149, -0.586838704727, -0.778704211755, 0.0771732083954, 0.694203707601, -0.0738017200702, 0.449329678098], #14 reading
	[0.270598649982, 0.375414047437, 0.451641847686, 0.515596988673, 0.404237424291, 0.00327736517631, 0.796675510451], #15 tarkeez
	[0.270598649982, 0.41534893172, 0.166000048611, 0.499737700227, 0.550903378139, -0.00375599438527, 0.826275959461], #16 abaa6
	[0.270598649982, 0.933483396953, 0.091140437173, 0.21034724564, 0.63974115315, -0.206347430349, 0.524223234067], #17 shaba7
	[-0.0676790631155, 0.890526994296, 0.330287645181, 0.30579433771, 0.659790219121, -0.235130339172, 0.724318339769], #18 bo
	[-0.18504296732, 0.92341534066, 0.151301643334, 0.300414825937, 0.68102482041, -0.142772529798, 0.685980020912], #19 shway shway
	[0.270598649982, 0.589968508029, -0.457174805354, 0.524664393465, 1.25829502649, -0.269816736257, 0.350269454565], #20 ammam
	[0.0518768935385, 0.700789684121, -0.238720885662, 0.670321346259, 1.13925709398, -0.778658926815, 0.423653545168], #21 allemek
	[-0.0524670420384, -0.512430319751, -0.82472412593, 0.233436271834, 0.618940114288, 0.0756363666054, 0.651007215024], #22 9afeq
	[0.0282335653382, -0.484123818992, -0.859568481943, 0.161149056845, 0.745834440251, 0.162118991561, 0.61950283946], #23 yammeny in 1
	[-0.497880513146, -0.0908941982938, -0.843828299937, 0.178345281886, 1.09171933582, 0.246363468336, 0.669971728273], #24 yemeny in 2
	[-0.17117915554, -0.0897441705399, -0.965278963016, 0.176068207108, 0.930944515441, -0.0839464696385, 0.65454509394],#25 yemeny in 3
	[-0.0918773999124, 0.0202087709754, -0.140300942778, 0.985668259865, 0.610017180426, -0.371679783863, 0.67158236066], #26 yemeny in 4
	[0.0343635695963, 0.0287030129734, -0.0989785938768, 0.994085752976, 0.742983058111, -0.131149210454, 0.38960353563], #27 yemeny in 5
	[0.270598649982, 0.653281233946, -0.270598649973, 0.653281233953, 0.9089723296, -1.10397557791, 0.320976000004], #28 yesary in 1
	[0.665228757065, 0.727711288511, 0.0994719092195, 0.132943175814, 0.344052505102, -0.637607681065, -0.558119228263], #29 yesary in 2
	[0.270598649982, 0.653281233946, -0.270598649973, 0.653281233953, 0.9089723296, -1.10397557791, 0.320976000004], #30 yesary in 3
	[0.674208891432, 0.725094379003, 0.0842524518307, 0.112169677775, 0.376012908658, -0.629462384667, -0.561237639267], #31 yesary in 4
	[0.802342861353, 0.576532870747, 0.113510689953, 0.104604776824, 0.492489592741, -0.557430989252, -0.568166558475], #32 yesary in 5
	[0.82797118639, 0.55907056023, 0.0184486361139, 0.0422928831597, 0.295667528973, -0.662481912426, -0.556687263041] #33 yesary in 6
]
left_arm =[
	[0.149047900465, 0.0639904673714, 0.484830656364, 0.859450941553, 0.811360449241, 0.239764546868, 0.715502914616],  		#0
	[0.1396633593, 0.105974519313, 0.483854717135, 0.857186691331, 0.787098068202, 0.26565413629, 0.939610712717],					#1
	[0.691363231585, 0.229464279623, 0.666455817969, 0.157284188003, 1.25195921954, 0.373585576316, 0.292874074141],				#2
	[0.374423768488, -0.437194393795, 0.606289362436, 0.548914804273, 0.724239540499, 0.212831903764, 0.600535255536],			#3
	[0.103004973082, -0.0365409813435, 0.678759207048, 0.726323764154, 0.906145208048, 0.164643933973, 0.78128949703],			#4
	[-0.677007489764, -0.724248562716, -0.123185074479, 0.0456432867554, 0.862953201752, 0.62719571349, 0.0147319448889],		#5
	[0.132895243949, 0.201743716852, 0.305182485717, 0.921124918043, 0.92563408245, 0.317590306889, 0.347316786721],				#6
	[0.260160688995, -0.196338333186, -0.05105401599, 0.944246625708, 0.462104614155, 0.1497113427, 0.775804449413],				#7
	[0.678667098389, 0.305435890881, 0.550378182424, 0.378390402296, 1.19544989039, 0.232110051203, 0.153924573746],				#8
	[0.172810273849, 0.469237599689, 0.442107434757, 0.74416479917, 1.1295689424, 0.496049059691, 0.869790958941],					#9
	[0.799345785101, -0.147363372239, 0.565842883246, 0.138685429938, 1.08610954153, 0.184576392896, 0.657400225193],				#10
	[0.772636380128, 0.439616312197, 0.400065635845, 0.221723157881, 0.791820538672, 0.400774976392, 0.81959858198],				#11
	[0.796150343682, 0.407204133295, 0.398765073774, 0.205370750888, 0.867866114812, 0.225527342491, 0.780216837284],				#12
	[-0.00419773076716, 0.137453279286, -0.990485356198, 0.00607551005526, 0.529185982379, 0.275384210597, 0.838487749685],	#13
	[0.244974577772, 0.643989431418, -0.708613967454, 0.152234850652, 0.628278481838, 0.0446862685771, 0.479623666758],			#14
	[0.512406610652, 0.507382580818, -0.581145181738, 0.377690863036, 0.407232691314, -0.0114188670876, 0.819440331989],		#15
	[0.354119373307, 0.716149972689, -0.493438021961, 0.344144006315, 0.581031958601, 0.0129948001382, 0.862407134029],			#16
	[0.273045368108, 0.856282568729, -0.195114767358, 0.392233791305, 0.803775526794, 0.0903540059427, 0.642792534435],			#17
	[0.0753119939347, 0.834202119707, -0.334548404672, 0.432087585414, 0.765711859928, 0.334955897024, 0.776364227558],			#18
	[0.948394147624, -0.0103294735278, 0.296741333769, 0.110508586952, 0.598280902324, 0.186638503435, 0.652752583359],			#19
	[0.575285695676, 0.448961690511, 0.466518790137, 0.498753651882, 1.25073638151, 0.0864676807162, 0.336024921439],				#20
	[-0.053275634133, 0.694879333211, 0.200286160383, 0.688572426479, 1.1858035382, 0.679638595736, 0.469594115107],				#21
	[0.197157522331, -0.420612437172, 0.882120192307, 0.0779618843367, 0.93592384155, -0.141909030128, 0.493977321591],			#22
	[-0.63464751984, 0.772367717799, 0.0238534698844, 0.0100819659303, 0.253113415053, 0.702498903243, -0.611094891387],		#23
	[-0.633516389514, 0.773263577144, 0.0245933284252, 0.0107514034977, 0.253832823521, 0.704505028433, -0.610170272195],		#24
	[-0.927251224652, 0.28549564094, -0.190831507156, 0.149267348276, 0.363870517783, 0.650428840215, -0.61855625725],			#25
	[-0.927351182044, 0.284977245628, -0.191379145568, 0.148935480253, 0.36442754835, 0.649740115988, -0.618528406866],			#26
	[-0.760648752981, 0.628726086264, -0.0523490618218, 0.152777321118, 0.288150385952, 0.788832990731, -0.584716329567],		#27
	[-0.270598649982, 0.653281233946, 0.270598649992, 0.653281233945, 0.908972329586, 1.10397557792, 0.320976000004],				#28
	[0.387390339197, -0.318790472945, 0.847856420513, 0.171583360647, 1.01798588154, -0.159517796268, 0.776458877064],			#29
	[-0.270598649982, 0.653281233946, 0.270598649992, 0.653281233945, 0.908972329586, 1.10397557792, 0.320976000004],				#30
	[-0.182524609977, 0.179101738058, -0.944753470174, 0.205056613575, 0.957659504994, -0.188881494249, 0.817142186491],		#31
	[-0.0808000734731, 0.477646107851, -0.773840330142, 0.408201347317, 0.896622426596, -0.351646986288, 0.885781008428],		#32
	[0.821174547663, 0.268082886579, -0.307283439277, 0.399225269917, 0.5292835626, 0.136080322784, 0.647170433109]					#33
]


def pose_right(r=0):
	pose_target_right.orientation.x = right_arm[r][0] 
	pose_target_right.orientation.y = right_arm[r][1] 
	pose_target_right.orientation.z = right_arm[r][2] 
	pose_target_right.orientation.w = right_arm[r][3] 
	pose_target_right.position.x = right_arm[r][4]
	pose_target_right.position.y = right_arm[r][5]
	pose_target_right.position.z = right_arm[r][6]

def pose_left(l=0):
	pose_target_left.orientation.x =  left_arm[l][0]
	pose_target_left.orientation.y =  left_arm[l][1]
	pose_target_left.orientation.z =  left_arm[l][2]
	pose_target_left.orientation.w =  left_arm[l][3]
	pose_target_left.position.x =  left_arm[l][4]
	pose_target_left.position.y =  left_arm[l][5]
	pose_target_left.position.z =  left_arm[l][6]



# Now, add your Pose msg to the group's pose target
# group.set_pose_target(pose_target)

first_time_right = False
first_time_left = False
rr = rospy.Rate(10) # 10hz
while not rospy.is_shutdown():
#Now, add your Pose msg to the group's pose target
    count = 0
    while count<=10 :
		print count
		r = random.randint(0, 33)
		print("Now execute : right({})".format(r))
		pose_right(r)
		group_right.set_pose_target(pose_target_right, end_effector_link = "right_gripper")
		plan = group_right.plan()
		ret = group_right.execute(plan, wait=True)
		group_right.clear_pose_targets()
		rr.sleep()
		count +=1
	
    count = 0
    while count<=10 :
		print count
		l = random.randint(0, 33)
		print("Now execute : left ({})".format(l))
		pose_left(l)
		group_left.set_pose_target(pose_target_left, end_effector_link = "left_gripper")
		plan = group_left.plan()
		ret = group_left.execute(plan, wait=True)
		group_left.clear_pose_targets()
		rr.sleep()
		count +=1

    count = 0
    while count<=10 :
		print count
		l = random.randint(0, 33)
		r = random.randint(0, 33)
		print("Now execute : right ({}) and left({})".format(r,l))
		pose_right(r)
		pose_left(l)
		group_both.set_pose_target(pose_target_left, end_effector_link = "left_gripper")
		group_both.set_pose_target(pose_target_right, end_effector_link = "right_gripper")
		plan = group_both.plan()
		ret = group_both.execute(plan, wait=True)
		group_both.clear_pose_targets()
		rr.sleep()
		count +=1



